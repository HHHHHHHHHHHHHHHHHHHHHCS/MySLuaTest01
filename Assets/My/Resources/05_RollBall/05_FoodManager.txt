require("05_RollBall/05_Food")

local foodManager={}

local spawnCount,radius,rotSpeed=12,4,45

local parent

function foodManager:Init(gameManager,prefabsData)

    table.insert( gameManager.updateList, self.Update)

    foodManager.foods={}
    parent=GameObject().transform
    parent.name="FoodParent"
    local angle = 360/spawnCount

    for i=1,spawnCount do

        local newFoodTs = GameObject.Instantiate(prefabsData.foodPrefab,parent).transform
        local pos = newFoodTs.position
        pos.x=radius* math.cos(math.rad(i*angle))
        pos.z=radius* math.sin(math.rad(i*angle))
        newFoodTs.position=pos

        local newFood = food:New(newFoodTs)
        table.insert(foodManager.foods, newFood)
    end
end

function foodManager:Update()
    for k,v in pairs(foodManager.foods) do
        v:Rot(rotSpeed)
    end
end

return foodManager


